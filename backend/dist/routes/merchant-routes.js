"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = require("express");
const auth_controller_1 = require("../controllers/auth-controller");
const merchant_controller_1 = require("../controllers/merchant-controller");
const require_auth_middleware_1 = require("../middleware/require-auth-middleware");
const client_1 = require("@prisma/client");
const multer_1 = require("../lib/multer");
const router = (0, express_1.Router)();
router.post("/signup", (req, res) => { auth_controller_1.authController.registerMerchant(req, res); });
router.get("/", () => { });
router.put("/:id", () => { });
router.delete("/:id", () => { });
router.get('/profile', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)(), () => { });
router.put('/profile', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)(), () => { });
router.put('/settings', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)(), () => { });
router.patch('/:merchant_id/address', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER]), merchant_controller_1.merchantController.updateMerchantAddress);
router.get('/user-merchants/:merchant_id', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)(), merchant_controller_1.merchantController.getUserMerchants);
router.get('/branches/:merchant_id', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)(), merchant_controller_1.merchantController.getBranchesByMerchantId);
router.post('/branches/create', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER]), merchant_controller_1.merchantController.createBranch);
router.patch('/branches/:branch_id', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER]), merchant_controller_1.merchantController.updateBranch);
router.patch('/branches/:branch_id/address', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER]), merchant_controller_1.merchantController.updateBranchAddress);
router.post('/branches/:branch_id/features', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER]), merchant_controller_1.merchantController.createBranchFeature);
router.delete('/branches/features/:feature_id', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER]), merchant_controller_1.merchantController.deleteBranchFeature);
router.post('/branches/:branch_id/tags', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER]), merchant_controller_1.merchantController.createBranchTag);
router.delete('/branches/tags/:tag_id', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER]), merchant_controller_1.merchantController.deleteBranchTag);
router.put('/branches/:branch_id/opening-hours', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER]), merchant_controller_1.merchantController.updateBranchOpeningHours);
router.delete('/branches/:branch_id', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER]), () => { });
router.post('/branches/:branch_id/images/feature-image', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER]), multer_1.uploadFeatureImage, merchant_controller_1.merchantController.uploadBranchImages);
router.post('/branches/:branch_id/images/galleries', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER]), multer_1.uploadGalleries, merchant_controller_1.merchantController.uploadBranchImages);
router.delete('/branches/:branch_id/images/:image_id', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER]), merchant_controller_1.merchantController.deleteBranchImages);
router.post('/logo', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER]), multer_1.uploadLogo, merchant_controller_1.merchantController.uploadLogo);
router.delete('/logo/:logo_id', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER]), merchant_controller_1.merchantController.deleteLogo);
router.get('/queues', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER, client_1.MerchantRole.FRONTLINE]), merchant_controller_1.merchantController.viewQueuesByBranch);
router.post('/queues/create', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER]), merchant_controller_1.merchantController.createQueue);
router.get('/queues/:queue_id/customers', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER, client_1.MerchantRole.FRONTLINE]), () => { });
router.post('/queues/:queue_id/customers/:customer_id/next', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER, client_1.MerchantRole.FRONTLINE]), () => { });
router.post('/queues/:queue_id/customers/:customer_id/skip', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER, client_1.MerchantRole.FRONTLINE]), () => { });
router.post('/queues/:queue_id/customers/:customer_id/remove', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER, client_1.MerchantRole.FRONTLINE]), () => { });
router.put('/queues/:queue_id', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER]), merchant_controller_1.merchantController.updateQueue);
router.delete('/queues/:queue_id', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER]), merchant_controller_1.merchantController.deleteQueue);
router.put('/queues/:queue_id/status', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER, client_1.MerchantRole.FRONTLINE]), () => { });
router.get('/analytics/overview', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER]), () => { });
router.get('/analytics/queues', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER]), () => { });
router.get('/analytics/customers', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER]), () => { });
router.get('/analytics/wait-times', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)([client_1.MerchantRole.OWNER, client_1.MerchantRole.MANAGER]), () => { });
router.post('/switch-branch', (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)(), merchant_controller_1.merchantController.switchBranch);
router.get("/:merchant_id", (0, require_auth_middleware_1.requireAuth)([client_1.UserRole.MERCHANT]), (0, require_auth_middleware_1.requireMerchantRole)(), merchant_controller_1.merchantController.getMerchantById);
exports.default = router;
